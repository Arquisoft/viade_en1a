import React, {Component} from "react";
import RoutesSideBar from "./routesSideBar.component";
import GoogleMapReact from "google-map-react";
import Carousel from "nuka-carousel";
import {withTranslation} from "react-i18next";

class SimpleMap extends Component {

    constructor() {
        super();

        this.fullscreen = this.fullscreen.bind(this);

        this.heatMapData = {
            positions: [
                {"lat": "43.3605", "lng": "-5.85532"},
                {"lat": "43.3521", "lng": "-5.85504"},
                {"lat": "43.3574", "lng": "-5.84924"},
                {"lat": "43.3597", "lng": "-5.85688"},
                {"lat": "43.3575", "lng": "-5.84792"},
                {"lat": "43.3539", "lng": "-5.84762"},
                {"lat": "43.3561", "lng": "-5.84694"},
                {"lat": "43.3559", "lng": "-5.85766"},
                {"lat": "43.3614", "lng": "-5.85193"},
                {"lat": "43.3568", "lng": "-5.84789"},
                {"lat": "43.3593", "lng": "-5.8566"},
                {"lat": "43.3605", "lng": "-5.85374"},
                {"lat": "43.3592", "lng": "-5.85175"},
                {"lat": "43.3597", "lng": "-5.85176"},
                {"lat": "43.357", "lng": "-5.85"},
                {"lat": "43.3568", "lng": "-5.85327"},
                {"lat": "43.3538", "lng": "-5.85205"},
                {"lat": "43.3543", "lng": "-5.84919"},
                {"lat": "43.3575", "lng": "-5.85645"},
                {"lat": "43.3559", "lng": "-5.8513"},
                {"lat": "43.355", "lng": "-5.85033"},
                {"lat": "43.3614", "lng": "-5.85196"},
                {"lat": "43.3583", "lng": "-5.84965"},
                {"lat": "43.3606", "lng": "-5.85379"},
                {"lat": "43.3596", "lng": "-5.8511"},
                {"lat": "43.3571", "lng": "-5.85131"},
                {"lat": "43.3609", "lng": "-5.85076"},
                {"lat": "43.3528", "lng": "-5.85158"},
                {"lat": "43.3532", "lng": "-5.84903"},
                {"lat": "43.3597", "lng": "-5.85601"},
                {"lat": "43.3527", "lng": "-5.85571"},
                {"lat": "43.3564", "lng": "-5.8505"},
                {"lat": "43.3577", "lng": "-5.855"},
                {"lat": "43.3542", "lng": "-5.84735"},
                {"lat": "43.3545", "lng": "-5.85166"},
                {"lat": "43.3562", "lng": "-5.85489"},
                {"lat": "43.3586", "lng": "-5.85024"},
                {"lat": "43.3545", "lng": "-5.8529"},
                {"lat": "43.3613", "lng": "-5.85084"},
                {"lat": "43.3579", "lng": "-5.85403"},
                {"lat": "43.3589", "lng": "-5.85336"},
                {"lat": "43.3596", "lng": "-5.85013"},
                {"lat": "43.3602", "lng": "-5.84931"},
                {"lat": "43.3564", "lng": "-5.84942"},
                {"lat": "43.3575", "lng": "-5.8567"},
                {"lat": "43.353", "lng": "-5.85416"},
                {"lat": "43.3571", "lng": "-5.85475"},
                {"lat": "43.3537", "lng": "-5.85645"},
                {"lat": "43.3532", "lng": "-5.8516"},
                {"lat": "43.3555", "lng": "-5.84883"},
                {"lat": "43.3565", "lng": "-5.85223"},
                {"lat": "43.3567", "lng": "-5.85228"},
                {"lat": "43.3566", "lng": "-5.85216"},
                {"lat": "43.3603", "lng": "-5.85321"},
                {"lat": "43.3595", "lng": "-5.84809"},
                {"lat": "43.3605", "lng": "-5.85425"},
                {"lat": "43.36", "lng": "-5.85528"},
                {"lat": "43.3544", "lng": "-5.84817"},
                {"lat": "43.3583", "lng": "-5.85706"},
                {"lat": "43.3585", "lng": "-5.85586"},
                {"lat": "43.3602", "lng": "-5.84792"},
                {"lat": "43.3542", "lng": "-5.85571"},
                {"lat": "43.3597", "lng": "-5.85361"},
                {"lat": "43.358", "lng": "-5.84825"},
                {"lat": "43.3606", "lng": "-5.85507"},
                {"lat": "43.3538", "lng": "-5.852"},
                {"lat": "43.3588", "lng": "-5.8545"},
                {"lat": "43.3549", "lng": "-5.84764"},
                {"lat": "43.3555", "lng": "-5.85001"},
                {"lat": "43.3595", "lng": "-5.85075"},
                {"lat": "43.3583", "lng": "-5.85449"},
                {"lat": "43.358", "lng": "-5.85427"},
                {"lat": "43.3525", "lng": "-5.85259"},
                {"lat": "43.3548", "lng": "-5.84779"},
                {"lat": "43.3536", "lng": "-5.85017"},
                {"lat": "43.3561", "lng": "-5.85692"},
                {"lat": "43.3588", "lng": "-5.8567"},
                {"lat": "43.3612", "lng": "-5.84998"},
                {"lat": "43.3543", "lng": "-5.8558"},
                {"lat": "43.3576", "lng": "-5.85191"},
                {"lat": "43.3609", "lng": "-5.85354"},
                {"lat": "43.3538", "lng": "-5.8478"},
                {"lat": "43.3536", "lng": "-5.85508"},
                {"lat": "43.3543", "lng": "-5.85607"},
                {"lat": "43.3612", "lng": "-5.85192"},
                {"lat": "43.354", "lng": "-5.85481"},
                {"lat": "43.3529", "lng": "-5.85251"},
                {"lat": "43.3588", "lng": "-5.85341"},
                {"lat": "43.3543", "lng": "-5.85247"},
                {"lat": "43.3527", "lng": "-5.85373"},
                {"lat": "43.3578", "lng": "-5.85549"},
                {"lat": "43.3523", "lng": "-5.84961"},
                {"lat": "43.3537", "lng": "-5.85437"},
                {"lat": "43.3603", "lng": "-5.85384"},
                {"lat": "43.3562", "lng": "-5.84744"},
                {"lat": "43.356", "lng": "-5.8467"},
                {"lat": "43.3605", "lng": "-5.85165"},
                {"lat": "43.3555", "lng": "-5.85006"},
                {"lat": "43.3582", "lng": "-5.85699"},
                {"lat": "43.3575", "lng": "-5.85816"},
                {"lat": "43.3579", "lng": "-5.84911"},
                {"lat": "43.3577", "lng": "-5.85479"},
                {"lat": "43.3568", "lng": "-5.85703"},
                {"lat": "43.3556", "lng": "-5.84813"},
                {"lat": "43.3557", "lng": "-5.85273"},
                {"lat": "43.3591", "lng": "-5.85625"},
                {"lat": "43.3586", "lng": "-5.84647"},
                {"lat": "43.3579", "lng": "-5.84942"},
                {"lat": "43.3591", "lng": "-5.84749"},
                {"lat": "43.3575", "lng": "-5.84847"},
                {"lat": "43.3591", "lng": "-5.85689"},
                {"lat": "43.3583", "lng": "-5.84867"},
                {"lat": "43.3533", "lng": "-5.85027"},
                {"lat": "43.3556", "lng": "-5.8471"},
                {"lat": "43.3564", "lng": "-5.84997"},
                {"lat": "43.3603", "lng": "-5.85325"},
                {"lat": "43.355", "lng": "-5.85289"},
                {"lat": "43.3554", "lng": "-5.84865"},
                {"lat": "43.3592", "lng": "-5.8471"},
                {"lat": "43.3533", "lng": "-5.84826"},
                {"lat": "43.3575", "lng": "-5.84631"},
                {"lat": "43.3591", "lng": "-5.8551"},
                {"lat": "43.3579", "lng": "-5.85778"},
                {"lat": "43.3608", "lng": "-5.8513"},
                {"lat": "43.3579", "lng": "-5.84661"},
                {"lat": "43.3552", "lng": "-5.85085"},
                {"lat": "43.3564", "lng": "-5.84781"},
                {"lat": "43.3566", "lng": "-5.85233"},
                {"lat": "43.3566", "lng": "-5.85209"},
                {"lat": "43.3566", "lng": "-5.85216"},
                {"lat": "43.3566", "lng": "-5.85222"},
                {"lat": "43.5208", "lng": "-5.67606"},
                {"lat": "43.5187", "lng": "-5.68053"},
                {"lat": "43.5195", "lng": "-5.67573"},
                {"lat": "43.5158", "lng": "-5.67316"},
                {"lat": "43.5212", "lng": "-5.67493"},
                {"lat": "43.5219", "lng": "-5.67531"},
                {"lat": "43.5217", "lng": "-5.67275"},
                {"lat": "43.5184", "lng": "-5.67705"},
                {"lat": "43.5203", "lng": "-5.67583"},
                {"lat": "43.52", "lng": "-5.68066"},
                {"lat": "43.5233", "lng": "-5.67712"},
                {"lat": "43.5169", "lng": "-5.67287"},
                {"lat": "43.5198", "lng": "-5.67734"},
                {"lat": "43.516", "lng": "-5.68061"},
                {"lat": "43.5173", "lng": "-5.67902"},
                {"lat": "43.5193", "lng": "-5.67498"},
                {"lat": "43.5211", "lng": "-5.67808"},
                {"lat": "43.5216", "lng": "-5.67404"},
                {"lat": "43.5213", "lng": "-5.6792"},
                {"lat": "43.5205", "lng": "-5.67838"},
                {"lat": "43.5229", "lng": "-5.67653"},
                {"lat": "43.5206", "lng": "-5.67142"},
                {"lat": "43.5236", "lng": "-5.6765"},
                {"lat": "43.5173", "lng": "-5.67961"},
                {"lat": "43.5193", "lng": "-5.67869"},
                {"lat": "43.519", "lng": "-5.67641"},
                {"lat": "43.519", "lng": "-5.67642"},
                {"lat": "43.5273", "lng": "-5.67919"},
                {"lat": "43.5267", "lng": "-5.67384"},
                {"lat": "43.5245", "lng": "-5.67731"},
                {"lat": "43.525", "lng": "-5.67776"},
                {"lat": "43.5214", "lng": "-5.67205"},
                {"lat": "43.5266", "lng": "-5.67595"},
                {"lat": "43.5211", "lng": "-5.67949"},
                {"lat": "43.5208", "lng": "-5.67612"},
                {"lat": "43.524", "lng": "-5.6737"},
                {"lat": "43.5251", "lng": "-5.67539"},
                {"lat": "43.5217", "lng": "-5.67464"},
                {"lat": "43.5189", "lng": "-5.67847"},
                {"lat": "43.5227", "lng": "-5.67978"},
                {"lat": "43.5237", "lng": "-5.67611"},
                {"lat": "43.5217", "lng": "-5.67437"},
                {"lat": "43.5234", "lng": "-5.67917"},
                {"lat": "43.5269", "lng": "-5.6754"},
                {"lat": "43.5212", "lng": "-5.67608"},
                {"lat": "43.5255", "lng": "-5.67737"},
                {"lat": "43.5276", "lng": "-5.67725"},
                {"lat": "43.5242", "lng": "-5.67784"},
                {"lat": "43.5245", "lng": "-5.67303"},
                {"lat": "43.5245", "lng": "-5.68039"},
                {"lat": "43.5234", "lng": "-5.68161"},
                {"lat": "43.5225", "lng": "-5.67662"},
                {"lat": "43.5233", "lng": "-5.67709"},
                {"lat": "43.5233", "lng": "-5.67709"},
                {"lat": "43.2481", "lng": "-5.56128"},
                {"lat": "43.2476", "lng": "-5.57"},
                {"lat": "43.2502", "lng": "-5.57069"},
                {"lat": "43.2478", "lng": "-5.56223"},
                {"lat": "43.2481", "lng": "-5.57026"},
                {"lat": "43.2439", "lng": "-5.56845"},
                {"lat": "43.2494", "lng": "-5.55928"},
                {"lat": "43.2504", "lng": "-5.56068"},
                {"lat": "43.2448", "lng": "-5.56688"},
                {"lat": "43.247", "lng": "-5.57184"},
                {"lat": "43.2505", "lng": "-5.56224"},
                {"lat": "43.2484", "lng": "-5.56065"},
                {"lat": "43.2468", "lng": "-5.56267"},
                {"lat": "43.2458", "lng": "-5.56939"},
                {"lat": "43.2496", "lng": "-5.5677"},
                {"lat": "43.2457", "lng": "-5.56524"},
                {"lat": "43.2509", "lng": "-5.56738"},
                {"lat": "43.2435", "lng": "-5.56183"},
                {"lat": "43.2512", "lng": "-5.56739"},
                {"lat": "43.2473", "lng": "-5.57036"},
                {"lat": "43.244", "lng": "-5.5617"},
                {"lat": "43.2506", "lng": "-5.56824"},
                {"lat": "43.2502", "lng": "-5.56478"},
                {"lat": "43.2498", "lng": "-5.5686"},
                {"lat": "43.2517", "lng": "-5.56259"},
                {"lat": "43.2475", "lng": "-5.56541"},
                {"lat": "43.2475", "lng": "-5.56546"},
                {"lat": "43.5417", "lng": "-5.69034"},
                {"lat": "43.5405", "lng": "-5.69193"},
                {"lat": "43.5445", "lng": "-5.68578"},
                {"lat": "43.5393", "lng": "-5.69316"},
                {"lat": "43.5436", "lng": "-5.6927"},
                {"lat": "43.5405", "lng": "-5.68861"},
                {"lat": "43.5405", "lng": "-5.69282"},
                {"lat": "43.5388", "lng": "-5.68812"},
                {"lat": "43.5406", "lng": "-5.69096"},
                {"lat": "43.5404", "lng": "-5.69258"},
                {"lat": "43.5387", "lng": "-5.6924"},
                {"lat": "43.5431", "lng": "-5.69345"},
                {"lat": "43.5397", "lng": "-5.68601"},
                {"lat": "43.5387", "lng": "-5.68852"},
                {"lat": "43.5435", "lng": "-5.68511"},
                {"lat": "43.5387", "lng": "-5.68652"},
                {"lat": "43.5392", "lng": "-5.69223"},
                {"lat": "43.5421", "lng": "-5.69101"},
                {"lat": "43.5401", "lng": "-5.6864"},
                {"lat": "43.5404", "lng": "-5.6899"},
                {"lat": "43.5377", "lng": "-5.68835"},
                {"lat": "43.5437", "lng": "-5.69126"},
                {"lat": "43.5423", "lng": "-5.69341"},
                {"lat": "43.5421", "lng": "-5.69466"},
                {"lat": "43.54", "lng": "-5.68952"},
                {"lat": "43.5413", "lng": "-5.68925"},
                {"lat": "43.5413", "lng": "-5.68941"},
                {"lat": "43.2406", "lng": "-5.55927"},
                {"lat": "43.2421", "lng": "-5.56914"},
                {"lat": "43.2467", "lng": "-5.56283"},
                {"lat": "43.2463", "lng": "-5.56043"},
                {"lat": "43.2452", "lng": "-5.56527"},
                {"lat": "43.2414", "lng": "-5.56127"},
                {"lat": "43.2398", "lng": "-5.56575"},
                {"lat": "43.245", "lng": "-5.56715"},
                {"lat": "43.2398", "lng": "-5.5638"},
                {"lat": "43.24", "lng": "-5.56104"},
                {"lat": "43.2431", "lng": "-5.5683"},
                {"lat": "43.2436", "lng": "-5.56115"},
                {"lat": "43.2432", "lng": "-5.56377"},
                {"lat": "43.2432", "lng": "-5.56138"},
                {"lat": "43.2456", "lng": "-5.56275"},
                {"lat": "43.2451", "lng": "-5.5622"},
                {"lat": "43.2402", "lng": "-5.56098"},
                {"lat": "43.2398", "lng": "-5.56751"},
                {"lat": "43.2411", "lng": "-5.56433"},
                {"lat": "43.2458", "lng": "-5.56148"},
                {"lat": "43.2399", "lng": "-5.56226"},
                {"lat": "43.2443", "lng": "-5.55763"},
                {"lat": "43.2405", "lng": "-5.55918"},
                {"lat": "43.2472", "lng": "-5.5618"},
                {"lat": "43.2414", "lng": "-5.56001"},
                {"lat": "43.2433", "lng": "-5.56398"},
                {"lat": "43.2431", "lng": "-5.56405"},
                {"lat": "43.2417", "lng": "-5.56725"},
                {"lat": "43.2417", "lng": "-5.56725"},
                {"lat": "43.2417", "lng": "-5.56725"},
                {"lat": "43.2417", "lng": "-5.56725"},
                {"lat": "43.2417", "lng": "-5.56725"},
                {"lat": "43.2417", "lng": "-5.56725"},
                {"lat": "43.2431", "lng": "-5.56417"},
                {"lat": "43.2433", "lng": "-5.56393"},
                {"lat": "43.2432", "lng": "-5.56397"},
                {"lat": "43.2471", "lng": "-5.56724"},
                {"lat": "43.2447", "lng": "-5.56864"},
                {"lat": "43.2442", "lng": "-5.56743"},
                {"lat": "43.2429", "lng": "-5.55808"},
                {"lat": "43.2459", "lng": "-5.56714"},
                {"lat": "43.242", "lng": "-5.56664"},
                {"lat": "43.2408", "lng": "-5.56019"},
                {"lat": "43.2421", "lng": "-5.56483"},
                {"lat": "43.2437", "lng": "-5.56277"},
                {"lat": "43.2456", "lng": "-5.56408"},
                {"lat": "43.2452", "lng": "-5.56906"},
                {"lat": "43.2432", "lng": "-5.56188"},
                {"lat": "43.2466", "lng": "-5.56474"},
                {"lat": "43.2431", "lng": "-5.57062"},
                {"lat": "43.2396", "lng": "-5.56189"},
                {"lat": "43.2463", "lng": "-5.5665"},
                {"lat": "43.244", "lng": "-5.56313"},
                {"lat": "43.241", "lng": "-5.56664"},
                {"lat": "43.2465", "lng": "-5.56013"},
                {"lat": "43.2452", "lng": "-5.56299"},
                {"lat": "43.2429", "lng": "-5.56176"},
                {"lat": "43.2432", "lng": "-5.57069"},
                {"lat": "43.2384", "lng": "-5.56468"},
                {"lat": "43.2398", "lng": "-5.56281"},
                {"lat": "43.2438", "lng": "-5.55743"},
                {"lat": "43.2431", "lng": "-5.56384"},
                {"lat": "43.2433", "lng": "-5.56393"},
                {"lat": "43.2432", "lng": "-5.56394"},
                {"lat": "43.1617", "lng": "-5.82689"},
                {"lat": "43.1587", "lng": "-5.82487"},
                {"lat": "43.1574", "lng": "-5.82673"},
                {"lat": "43.1632", "lng": "-5.82655"},
                {"lat": "43.1603", "lng": "-5.83497"},
                {"lat": "43.1598", "lng": "-5.8296"},
                {"lat": "43.1616", "lng": "-5.83204"},
                {"lat": "43.1581", "lng": "-5.82143"},
                {"lat": "43.1633", "lng": "-5.83163"},
                {"lat": "43.1637", "lng": "-5.83157"},
                {"lat": "43.1617", "lng": "-5.82337"},
                {"lat": "43.1597", "lng": "-5.82214"},
                {"lat": "43.1569", "lng": "-5.82613"},
                {"lat": "43.1596", "lng": "-5.82995"},
                {"lat": "43.1567", "lng": "-5.82482"},
                {"lat": "43.1565", "lng": "-5.82487"},
                {"lat": "43.164", "lng": "-5.82569"},
                {"lat": "43.1586", "lng": "-5.82845"},
                {"lat": "43.1613", "lng": "-5.83296"},
                {"lat": "43.1592", "lng": "-5.82886"},
                {"lat": "43.1595", "lng": "-5.82345"},
                {"lat": "43.1593", "lng": "-5.82336"},
                {"lat": "43.1578", "lng": "-5.82773"},
                {"lat": "43.1599", "lng": "-5.82903"},
                {"lat": "43.1572", "lng": "-5.82767"},
                {"lat": "43.1604", "lng": "-5.82803"},
                {"lat": "43.1602", "lng": "-5.8281"},
                {"lat": "45.8157", "lng": "15.9689"},
                {"lat": "45.8105", "lng": "15.9903"},
                {"lat": "45.8168", "lng": "15.9659"},
                {"lat": "45.8137", "lng": "15.9643"},
                {"lat": "45.8196", "lng": "15.9758"},
                {"lat": "45.8167", "lng": "15.9942"},
                {"lat": "45.814", "lng": "15.9886"},
                {"lat": "45.8151", "lng": "15.9857"},
                {"lat": "45.8136", "lng": "15.9988"},
                {"lat": "45.8125", "lng": "15.9904"},
                {"lat": "45.8155", "lng": "15.9903"},
                {"lat": "45.8153", "lng": "15.9741"},
                {"lat": "45.814", "lng": "15.9894"},
                {"lat": "45.8187", "lng": "15.9875"},
                {"lat": "45.8181", "lng": "15.9769"},
                {"lat": "45.8112", "lng": "15.9871"},
                {"lat": "45.8138", "lng": "15.9667"},
                {"lat": "45.816", "lng": "15.9829"},
                {"lat": "45.817", "lng": "15.973"},
                {"lat": "45.8148", "lng": "15.9747"},
                {"lat": "45.8184", "lng": "15.9766"},
                {"lat": "45.8185", "lng": "15.986"},
                {"lat": "45.8136", "lng": "15.9708"},
                {"lat": "45.8141", "lng": "15.9741"},
                {"lat": "45.8128", "lng": "15.9833"},
                {"lat": "45.8084", "lng": "15.9939"},
                {"lat": "45.8046", "lng": "15.9808"},
                {"lat": "45.8088", "lng": "15.9769"},
                {"lat": "45.8097", "lng": "15.9756"},
                {"lat": "45.8056", "lng": "15.9981"},
                {"lat": "45.8103", "lng": "15.9805"},
                {"lat": "45.8083", "lng": "15.997"},
                {"lat": "45.8074", "lng": "15.9923"},
                {"lat": "45.8096", "lng": "15.996"},
                {"lat": "45.8122", "lng": "15.9871"},
                {"lat": "45.8038", "lng": "15.9926"},
                {"lat": "45.8073", "lng": "15.9791"},
                {"lat": "45.806", "lng": "15.9695"},
                {"lat": "45.8082", "lng": "15.972"},
                {"lat": "45.8101", "lng": "15.9889"},
                {"lat": "45.809", "lng": "15.9963"},
                {"lat": "45.8086", "lng": "15.9885"},
                {"lat": "45.8114", "lng": "15.986"},
                {"lat": "45.8066", "lng": "15.9754"},
                {"lat": "45.8081", "lng": "15.9934"},
                {"lat": "45.8122", "lng": "15.9809"},
                {"lat": "45.8061", "lng": "15.9652"},
                {"lat": "45.8058", "lng": "15.9991"},
                {"lat": "45.8097", "lng": "15.9895"},
                {"lat": "45.8063", "lng": "15.9875"},
                {"lat": "43.359", "lng": "-5.85192"},
                {"lat": "43.3583", "lng": "-5.84937"},
                {"lat": "43.3553", "lng": "-5.85315"},
                {"lat": "43.3601", "lng": "-5.85003"},
                {"lat": "43.3627", "lng": "-5.85167"},
                {"lat": "43.3559", "lng": "-5.85465"},
                {"lat": "43.3617", "lng": "-5.85266"},
                {"lat": "43.3585", "lng": "-5.85088"},
                {"lat": "43.3605", "lng": "-5.85027"},
                {"lat": "43.3583", "lng": "-5.84848"},
                {"lat": "43.361", "lng": "-5.85492"},
                {"lat": "43.3598", "lng": "-5.85761"},
                {"lat": "43.3579", "lng": "-5.84764"},
                {"lat": "43.3609", "lng": "-5.85075"},
                {"lat": "43.3553", "lng": "-5.855"},
                {"lat": "43.3561", "lng": "-5.85138"},
                {"lat": "43.3583", "lng": "-5.85586"},
                {"lat": "43.3592", "lng": "-5.8569"},
                {"lat": "43.3556", "lng": "-5.84986"},
                {"lat": "43.3607", "lng": "-5.84965"},
                {"lat": "43.354", "lng": "-5.85252"},
                {"lat": "43.3556", "lng": "-5.85048"},
                {"lat": "43.3546", "lng": "-5.85689"},
                {"lat": "43.3599", "lng": "-5.85234"},
                {"lat": "43.3606", "lng": "-5.85733"},
                {"lat": "43.3591", "lng": "-5.85747"},
                {"lat": "43.3621", "lng": "-5.85303"},
                {"lat": "43.3582", "lng": "-5.84995"},
                {"lat": "43.3561", "lng": "-5.85698"},
                {"lat": "43.3606", "lng": "-5.85357"},
                {"lat": "43.3571", "lng": "-5.8501"},
                {"lat": "43.355", "lng": "-5.85281"},
                {"lat": "43.3606", "lng": "-5.85771"},
                {"lat": "43.3548", "lng": "-5.85641"},
                {"lat": "43.3586", "lng": "-5.84962"},
                {"lat": "43.3595", "lng": "-5.85281"},
                {"lat": "43.3625", "lng": "-5.8549"},
                {"lat": "43.3569", "lng": "-5.8495"},
                {"lat": "43.3583", "lng": "-5.84805"},
                {"lat": "43.3586", "lng": "-5.85863"},
                {"lat": "43.3578", "lng": "-5.85179"},
                {"lat": "43.3542", "lng": "-5.85194"},
                {"lat": "43.3599", "lng": "-5.84922"},
                {"lat": "43.3568", "lng": "-5.85689"},
                {"lat": "43.3538", "lng": "-5.85399"},
                {"lat": "43.3547", "lng": "-5.85052"},
                {"lat": "43.3553", "lng": "-5.8535"},
                {"lat": "43.3536", "lng": "-5.85166"},
                {"lat": "43.3589", "lng": "-5.85592"},
                {"lat": "43.36", "lng": "-5.84833"},
                {"lat": "43.3602", "lng": "-5.85738"},
                {"lat": "43.3543", "lng": "-5.85717"},
                {"lat": "43.3551", "lng": "-5.85355"},
                {"lat": "43.3606", "lng": "-5.85346"},
                {"lat": "43.3562", "lng": "-5.85669"},
                {"lat": "43.361", "lng": "-5.856"},
                {"lat": "43.3615", "lng": "-5.85519"},
                {"lat": "43.3569", "lng": "-5.85046"},
                {"lat": "43.356", "lng": "-5.85207"},
                {"lat": "43.3615", "lng": "-5.8508"},
                {"lat": "43.3546", "lng": "-5.85146"},
                {"lat": "43.3536", "lng": "-5.8519"},
                {"lat": "43.3602", "lng": "-5.84896"},
                {"lat": "43.3596", "lng": "-5.85722"},
                {"lat": "43.355", "lng": "-5.85152"},
                {"lat": "43.3607", "lng": "-5.85679"},
                {"lat": "43.3606", "lng": "-5.85028"},
                {"lat": "43.3582", "lng": "-5.85011"},
                {"lat": "43.3566", "lng": "-5.85907"},
                {"lat": "43.3559", "lng": "-5.85372"},
                {"lat": "43.3567", "lng": "-5.85436"},
                {"lat": "43.3575", "lng": "-5.85388"},
                {"lat": "43.3564", "lng": "-5.85467"},
                {"lat": "43.3598", "lng": "-5.85568"},
                {"lat": "43.3554", "lng": "-5.8507"},
                {"lat": "43.3605", "lng": "-5.85417"},
                {"lat": "43.3553", "lng": "-5.85389"},
                {"lat": "43.357", "lng": "-5.8553"},
                {"lat": "43.3582", "lng": "-5.8503"},
                {"lat": "43.3607", "lng": "-5.85397"},
                {"lat": "43.3562", "lng": "-5.85856"},
                {"lat": "43.359", "lng": "-5.85604"},
                {"lat": "43.3527", "lng": "-5.8529"},
                {"lat": "43.3614", "lng": "-5.85219"},
                {"lat": "43.3539", "lng": "-5.85446"},
                {"lat": "43.3573", "lng": "-5.85425"},
                {"lat": "43.3554", "lng": "-5.85143"},
                {"lat": "43.3575", "lng": "-5.85423"},
                {"lat": "43.3544", "lng": "-5.85596"},
                {"lat": "43.3618", "lng": "-5.85215"},
                {"lat": "43.3542", "lng": "-5.85584"},
                {"lat": "43.3619", "lng": "-5.85158"},
                {"lat": "43.3608", "lng": "-5.85084"},
                {"lat": "43.3562", "lng": "-5.85699"},
                {"lat": "43.3579", "lng": "-5.85363"},
                {"lat": "43.3541", "lng": "-5.85039"},
                {"lat": "43.3599", "lng": "-5.84948"},
                {"lat": "43.3537", "lng": "-5.85104"},
                {"lat": "43.362", "lng": "-5.85383"},
                {"lat": "43.3548", "lng": "-5.85691"},
                {"lat": "43.3575", "lng": "-5.85787"},
                {"lat": "43.3594", "lng": "-5.85876"},
                {"lat": "43.3587", "lng": "-5.8488"},
                {"lat": "43.3586", "lng": "-5.8539"},
                {"lat": "43.3577", "lng": "-5.85477"},
                {"lat": "43.3587", "lng": "-5.85389"},
                {"lat": "43.3593", "lng": "-5.8585"},
                {"lat": "43.3599", "lng": "-5.85861"},
                {"lat": "43.3577", "lng": "-5.85051"},
                {"lat": "43.3597", "lng": "-5.85628"},
                {"lat": "43.3598", "lng": "-5.85268"},
                {"lat": "43.3568", "lng": "-5.85678"},
                {"lat": "43.3558", "lng": "-5.8559"},
                {"lat": "43.3538", "lng": "-5.85166"},
                {"lat": "43.36", "lng": "-5.8503"},
                {"lat": "43.3623", "lng": "-5.85421"},
                {"lat": "43.3616", "lng": "-5.85559"},
                {"lat": "43.3565", "lng": "-5.85582"},
                {"lat": "43.3579", "lng": "-5.85818"},
                {"lat": "43.3596", "lng": "-5.85599"},
                {"lat": "43.3567", "lng": "-5.85677"},
                {"lat": "43.3547", "lng": "-5.85717"},
                {"lat": "43.3529", "lng": "-5.8522"},
                {"lat": "43.3533", "lng": "-5.85097"},
                {"lat": "43.356", "lng": "-5.85884"},
                {"lat": "43.3607", "lng": "-5.85066"},
                {"lat": "43.354", "lng": "-5.85733"},
                {"lat": "43.352", "lng": "-5.85007"},
                {"lat": "43.3584", "lng": "-5.85119"},
                {"lat": "43.3521", "lng": "-5.85212"},
                {"lat": "43.3555", "lng": "-5.85823"},
                {"lat": "43.3563", "lng": "-5.84682"},
                {"lat": "43.3566", "lng": "-5.85134"},
                {"lat": "43.3565", "lng": "-5.85514"},
                {"lat": "43.3532", "lng": "-5.8554"},
                {"lat": "43.3606", "lng": "-5.84888"},
                {"lat": "43.3537", "lng": "-5.84758"},
                {"lat": "43.357", "lng": "-5.84635"},
                {"lat": "43.3555", "lng": "-5.85327"},
                {"lat": "43.3606", "lng": "-5.85158"},
                {"lat": "43.3592", "lng": "-5.84993"},
                {"lat": "43.3532", "lng": "-5.856"},
                {"lat": "43.3589", "lng": "-5.8471"},
                {"lat": "43.3585", "lng": "-5.85733"},
                {"lat": "43.3536", "lng": "-5.85516"},
                {"lat": "43.3562", "lng": "-5.84837"},
                {"lat": "43.3608", "lng": "-5.85238"},
                {"lat": "43.3613", "lng": "-5.85234"},
                {"lat": "43.3587", "lng": "-5.85568"},
                {"lat": "43.3551", "lng": "-5.85272"},
                {"lat": "43.3565", "lng": "-5.85221"},
                {"lat": "43.3567", "lng": "-5.85217"},
                {"lat": "43.3566", "lng": "-5.85226"},
                {"lat": "43.3566", "lng": "-5.85262"},
                {"lat": "43.358", "lng": "-5.85341"},
                {"lat": "43.3581", "lng": "-5.85339"},
                {"lat": "43.3581", "lng": "-5.85339"}
            ],
            options: {
                radius: 50,
                opacity: 1
            }
        };

        this.show = this.show.bind(this);
        this.toggleCOVID = this.toggleCOVID.bind(this);
        this.state = {
            url: "https://storage.googleapis.com/mapsdevsite/json/google.json",
            route: "",
            features: [],
            center: [43.358756869202914, -5.861785411834717],
            galery: [],
            zoom: 12,
            showCOVID: true,
            COVIDdata: this.heatMapData
        };
    }

    static defaultProps = {
        center: {
            lat: 59.95,
            lng: 30.33
        },
        zoom: 11
    };


    handleApiLoaded = (map, maps) => {
        this.map = map;
        this.maps = maps;
    };

    loadMap = () => {
        if (this.state.route !== null && this.map !== null) {
            this.setState({features: this.map.data.addGeoJson(this.state.route)});
            this.map.data.setMap(this.map);
        }
    };

    deleteOldRoute = () => {
        for (var i = 0; i < this.state.features.length; i++) {
            this.map.data.remove(this.state.features[parseInt(i)]);

        }
    };

    show = (route) => {
        let parsedRoute = this.convertToGeoJSON(route);
        let latitude = parsedRoute.features[0].geometry.coordinates[0][1];
        let longitude = parsedRoute.features[0].geometry.coordinates[0][0];
        this.deleteOldRoute();
        this.setState({route: parsedRoute, center: [latitude, longitude]}, this.loadMap);
        this.createGalery(route);
    };

    toggleCOVID = (showCOVID) => {

        if (showCOVID) {
            this.setState({
                showCOVID,
                COVIDdata: this.heatMapData
            });
        } else {
            this.setState({
                showCOVID,
                COVIDdata: {
                    positions: []
                }
            });
        }
    };

    convertToGeoJSON = (route) => {
        let parsedRoute = {
            type: "FeatureCollection",
            features: [
                {
                    type: "Feature",
                    properties: {},
                    geometry: {
                        type: "LineString",
                        coordinates: []
                    }
                }]
        };
        for (let i = 0; i < route.points.length; i++) {
            let routePoint = route.points[parseInt(i)];
            let pointCoordinates = [routePoint.longitude, routePoint.latitude, routePoint.elevation];
            parsedRoute.features[0].geometry.coordinates.push(pointCoordinates);
        }
        for (let i = 0; i < route.waypoints.length; i++) {
            let routeWaypoint = route.waypoints[parseInt(i)];
            let wayPoint = {

                type: "Feature",
                properties: {
                    name: routeWaypoint.name,
                    description: routeWaypoint.description,
                },
                geometry: {
                    type: "Point",
                    coordinates: [
                        routeWaypoint.longitude,
                        routeWaypoint.latitude,
                        routeWaypoint.elevation
                    ]
                }

            };
            parsedRoute.features.push(wayPoint);
        }

        return parsedRoute;
    };

    createGalery (route) {
        var list = [];
        for (var i = 0; i < route.media.length; i++) {
            if (route.media[parseInt(i)].url.substring(route.media[parseInt(i)].url.length - 3, route.media[parseInt(i)].url.length) === "jpg"
                || route.media[parseInt(i)].url.substring(route.media[parseInt(i)].url.length - 3, route.media[parseInt(i)].url.length) === "png") {
                list.push(
                    <img style={{margin:"auto", height: "20vh", width: "auto", border:"5px", }} /*onClick={() => this.fullscreen(this, i)}*/ alt="Route {route.name}" src={route.media[parseInt(i)].url}/>
                );
            } else {
                list.push(
                    <video style={{margin:"auto", height: "20vh", width: "auto"}} controls src={route.media[parseInt(i)].url}/>
                );
            }
           
        }
        this.setState({galery : list}) ;
    }

    fullscreen(id, i) {
        if ("fullscreenEnabled" in document || "webkitFullscreenEnabled" in document || "mozFullScreenEnabled" in document || "msFullscreenEnabled" in document) {
            if (document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled) {

                var elem = id.state.galery[i-1];

                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.mozRequestFullScreen) {
                    elem.mozRequestFullScreen();
                } else if (elem.webkitRequestFullscreen) {
                    elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) {
                    elem.msRequestFullscreen();
                } else {
                    alert("This element does not allow fullscreen mode in your browser");
                }

            }
        }
    }

    render() {
        return (
            <div style={{ width: "100%", display: "flex", flex: "row"}} id="id1">
                <RoutesSideBar show={this.show} toggleCOVID={this.toggleCOVID}/>
                <div style={{height: "50vh", width: "80%", marginLeft:"10vh",marginTop:"5vh", marginRight:"5vh"}} id="id2">
                    <GoogleMapReact
                        bootstrapURLKeys={{key: "AIzaSyBJH6rDTJZ8ehbHIuCo0egn1zwbz0FIOwQ"}}
                        defaultZoom={this.state.zoom}
                        heatmapLibrary={true}
                        heatmap={this.state.COVIDdata}
                        yesIWantToUseGoogleMapApiInternals={true}
                        center={this.state.center}
                        onGoogleApiLoaded={({map, maps}) => this.handleApiLoaded(map, maps)}

                    >
                    </GoogleMapReact>
                    <Carousel id="carousel" renderBottomCenterControls={false} slidesToShow={3} height="17vh" dragging={true}
                         style={{  marginTop:"5vh", textAlign:"center", background: "url('img/fondoGaleria.png')"}}>
                        { this.state.galery }
                    </Carousel>
                </div>
            </div>
        );
    }


}


export default  withTranslation() (SimpleMap);